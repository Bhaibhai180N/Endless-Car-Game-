<!DOCTYPE html>
<html>
<head>
  <title>Endless Car Game</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: white;
      font-family: Arial;
      text-align: center;
    }

    h1 {
      margin: 10px;
    }

    canvas {
      background: #444;
      display: block;
      margin: auto;
      border: 4px solid white;
    }

    #controls {
      margin: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      margin: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>üöó Endless Car Game</h1>
<p>Arrow Keys or Buttons</p>

<canvas id="game" width="400" height="600"></canvas>

<div id="controls">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
  <button onclick="restart()">üîÅ Restart</button>
</div>

<script>
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");

  let car, obstacles, speed, score, gameOver;
  let roadLines = [];

  function init() {
    car = { x: 180, y: 480, w: 40, h: 80 };
    obstacles = [];
    speed = 4;
    score = 0;
    gameOver = false;
    roadLines = [];
    for (let i = 0; i < 10; i++) {
      roadLines.push({ y: i * 70 });
    }
  }

  init();

  // Keyboard controls
  document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") moveLeft();
    if (e.key === "ArrowRight") moveRight();
  });

  function moveLeft() {
    if (car.x > 60) car.x -= 30;
  }

  function moveRight() {
    if (car.x < canvas.width - car.w - 60) car.x += 30;
  }

  function restart() {
    init();
    gameLoop();
  }

  // Create obstacles
  setInterval(() => {
    if (!gameOver) {
      let lane = [80, 180, 280];
      let x = lane[Math.floor(Math.random() * lane.length)];
      obstacles.push({ x: x, y: -100, w: 40, h: 80 });
    }
  }, 1300);

  function collision(a, b) {
    return (
      a.x < b.x + b.w &&
      a.x + a.w > b.x &&
      a.y < b.y + b.h &&
      a.y + a.h > b.y
    );
  }

  function drawRoad() {
    ctx.fillStyle = "#333";
    ctx.fillRect(50, 0, 300, canvas.height);

    ctx.strokeStyle = "white";
    ctx.lineWidth = 4;
    ctx.setLineDash([20, 20]);
    ctx.beginPath();
    ctx.moveTo(200, 0);
    ctx.lineTo(200, canvas.height);
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.fillStyle = "yellow";
    roadLines.forEach(l => {
      l.y += speed;
      if (l.y > canvas.height) l.y = -40;
      ctx.fillRect(190, l.y, 20, 40);
    });
  }

  function drawCar() {
    ctx.fillStyle = "blue";
    ctx.fillRect(car.x, car.y, car.w, car.h);
    ctx.fillStyle = "black";
    ctx.fillRect(car.x + 5, car.y + 10, 10, 15);
    ctx.fillRect(car.x + 25, car.y + 10, 10, 15);
  }

  function drawObstacles() {
    ctx.fillStyle = "red";
    obstacles.forEach(o => {
      o.y += speed;
      ctx.fillRect(o.x, o.y, o.w, o.h);
      if (collision(car, o)) gameOver = true;
    });
  }

  function drawUI() {
    ctx.fillStyle = "white";
    ctx.font = "18px Arial";
    ctx.fillText("Score: " + score, 10, 25);
    ctx.fillText("Speed: " + speed, 300, 25);
  }

  function gameLoop() {
    if (gameOver) {
      ctx.fillStyle = "rgba(0,0,0,0.7)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "red";
      ctx.font = "32px Arial";
      ctx.fillText("GAME OVER", 90, 280);
      ctx.fillStyle = "white";
      ctx.font = "20px Arial";
      ctx.fillText("Final Score: " + score, 120, 320);
      return;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawRoad();
    drawCar();
    drawObstacles();
    drawUI();

    score++;
    if (score % 500 === 0) speed++;

    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
